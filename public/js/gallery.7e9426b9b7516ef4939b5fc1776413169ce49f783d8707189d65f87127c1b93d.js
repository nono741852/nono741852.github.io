(()=>{var h=class{constructor(e={}){this.config=e,this.instances=[]}initialize(e,i){if(typeof GLightbox>"u")return console.error("GLightbox is not available"),null;let t={selector:`[data-gallery="${i}"]`,touchNavigation:this.config.touchNavigation??this.config.touchnavigation??!0,loop:this.config.loop??!1,draggable:this.config.draggable??!0,zoomable:this.config.zoomable??!0,autoplayVideos:this.config.autoplayVideos??this.config.autoplayvideos??!1,preload:this.config.preload??!0,width:this.config.width??"90vw",height:this.config.height??"90vh",descPosition:this.config.descPosition??this.config.descposition??"bottom"};try{let n=GLightbox(t);return this.instances.push({container:e,instance:n,galleryId:i}),n}catch(n){return console.error(`Error initializing GLightbox for ${i}:`,n),null}}setupAttributes(e,i,t){let n=i.getAttribute("data-gallery-title")||i.title||"",o=i.getAttribute("data-gallery-alt")||i.alt||"",r="";if(n&&o&&n!==o)r=`<h4>${n}</h4><p>${o}</p>`;else if(n)r=`<h4>${n}</h4>`;else if(o)r=`<p>${o}</p>`;else if(t){let l=t.textContent.trim();l&&(r=`<p>${l}</p>`)}r&&e.setAttribute("data-description",r)}destroy(){this.instances.forEach(e=>{try{e.instance&&e.instance.destroy&&e.instance.destroy()}catch(i){console.error("Error destroying lightbox instance:",i)}}),this.instances=[]}},g=class{constructor(e={}){this.config=e,this.instances=[]}initialize(e){if(typeof fjGallery>"u")return console.error("fjGallery is not available"),!1;let i={itemSelector:".fj-gallery-item",imageSelector:"img",rowHeight:parseInt(this.config.rowHeight??this.config.rowheight)||200,gutter:parseInt(this.config.gutter)||10,lastRow:this.config.lastRow??this.config.lastrow??"left",transitionDuration:this.config.transitionDuration??this.config.transitionduration??"0.3s",calculateItemsHeight:this.config.calculateItemsHeight??this.config.calculateitemsheight??!1,resizeDebounce:parseInt(this.config.resizeDebounce??this.config.resizedebounce)||100,rowHeightTolerance:parseFloat(this.config.rowHeightTolerance??this.config.rowheighttolerance)||.25,maxRowsCount:parseInt(this.config.maxRowsCount??this.config.maxrowscount)||Number.POSITIVE_INFINITY};try{return fjGallery([e],i),this.instances.push({container:e,options:i}),!0}catch(t){return console.error(`Error initializing fjGallery for ${e.id}:`,t),!1}}resize(){this.instances.forEach(e=>{try{fjGallery([e.container],"resize")}catch(i){console.error("Error resizing fjGallery:",i)}})}destroy(){this.instances.forEach(e=>{try{fjGallery([e.container],"destroy")}catch(i){console.error("Error destroying fjGallery instance:",i)}}),this.instances=[]}},u=class{constructor(){this.config=window.HUGO_GALLERY_CONFIG||{};let e=i=>{if(typeof i=="string")try{return JSON.parse(i)}catch(t){return console.error("JSON parse error:",t),{}}return i||{}};this.lightboxManager=new h(e(this.config.lightbox_options)),this.justifiedManager=new g(e(this.config.justified)),this.galleries=[],this.init()}init(){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>this.setup()):this.setup()}setup(){this.processImages()}processImages(){let e=document.querySelectorAll('.image-figure[data-gallery-type="auto"]');if(e.length===0)return;this.detectImageGroups(e).forEach((t,n)=>{t.length>1&&this.config.justified_gallery?this.createJustifiedGalleryGroup(t,n):this.processIndividualImages(t)})}detectImageGroups(e){let i=[],t=[];for(let n=0;n<e.length;n++){let o=e[n],r=e[n+1];t.push(o),!(r&&this.areConsecutiveByEmptyLine(o,r))&&t.length>0&&(i.push([...t]),t=[])}return t.length>0&&i.push([...t]),i}areConsecutiveByEmptyLine(e,i){let t=e.nextElementSibling;for(;t&&t!==i;){if(t.nodeType===Node.TEXT_NODE){if(t.textContent.trim()===""){t=t.nextElementSibling;continue}return!1}if(t.nodeType===Node.ELEMENT_NODE){if(t.matches(".image-figure")){t=t.nextElementSibling;continue}let n=t.tagName.toLowerCase(),o=t.textContent.trim();if(n==="p"&&o==="")return!1;if(n==="br"){t=t.nextElementSibling;continue}else if(o!=="")return!1;t=t.nextElementSibling}}return t===i}processIndividualImages(e){e.forEach((i,t)=>{i.classList.add("single-image"),this.config.lightbox&&this.setupLightboxForSingleImage(i,`single-${Date.now()}-${t}`)})}createJustifiedGalleryGroup(e,i){let t=document.createElement("div");t.className="fj-gallery",t.id=`fj-gallery-${i}`,e.forEach(o=>{let r=o.querySelector("img"),l=o.querySelector(".image-caption");if(r){let c=document.createElement("div");if(c.className="fj-gallery-item",this.config.lightbox){let s=document.createElement("a");s.href=r.getAttribute("data-gallery-src")||r.src,s.className="glightbox",s.setAttribute("data-gallery",t.id),this.lightboxManager.setupAttributes(s,r,l);let a=document.createElement("img");a.src=r.src,a.alt=r.alt||"",a.loading="lazy",r.naturalWidth&&r.naturalHeight&&(a.width=r.naturalWidth,a.height=r.naturalHeight),s.appendChild(a),c.appendChild(s)}else{let s=document.createElement("img");s.src=r.src,s.alt=r.alt||"",s.loading="lazy",r.naturalWidth&&r.naturalHeight&&(s.width=r.naturalWidth,s.height=r.naturalHeight),c.appendChild(s)}t.appendChild(c)}});let n=e[0];n.parentNode.insertBefore(t,n),e.forEach(o=>o.remove()),this.justifiedManager.initialize(t),this.config.lightbox&&this.lightboxManager.initialize(t,t.id),this.galleries.push({container:t,id:t.id,index:i})}setupLightboxForSingleImage(e,i){let t=e.querySelector("img"),n=e.querySelector(".image-caption");if(!t)return;let o=document.createElement("a");o.href=t.getAttribute("data-gallery-src")||t.src,o.className="glightbox",o.setAttribute("data-gallery",i),this.lightboxManager.setupAttributes(o,t,n),t.parentNode.insertBefore(o,t),o.appendChild(t),this.lightboxManager.initialize(e,i)}updateLayout(){this.justifiedManager.resize()}destroy(){this.justifiedManager.destroy(),this.lightboxManager.destroy(),this.galleries=[]}},p=new u,f;window.addEventListener("resize",()=>{clearTimeout(f),f=setTimeout(()=>{p.updateLayout()},250)});window.ImageGallery=u;window.LightboxManager=h;window.JustifiedLayoutManager=g;})();
